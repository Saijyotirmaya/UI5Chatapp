<core:FragmentDefinition
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  xmlns:suite="sap.suite.ui.commons"
  xmlns:form="sap.ui.layout.form"
  xmlns:l="sap.ui.layout"
  xmlns:f="sap.ui.layout.form"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:u="sap.ui.unified">

<Dialog id="chatDialog"  class="sapUiResponsivePadding" stretch="true" draggable="true" resizable="true"  showHeader="false">

  <SplitApp id="splitApp">

    <!-- Master Page -->
    <masterPages>
      <Page id="masterPage1">
        <content>
          <Input
            placeholder="Enter your name and Press ↵ to submit."
            submit="changeName"
            width="100%"
            class="Groupclass" />

          <List id="groupsList1" items="{chat>/filteredEmployees}">
            <StandardListItem
              title="{chat>EmployeeName}"
              icon="{path:'chat>ProfilePhoto', formatter: '.Formatter.getImageSrc'}"
              type="Navigation"
              press=".onPressGoToMaster" />
          </List>
        </content>
      </Page>
    </masterPages>

    <!-- Detail Page -->
    <detailPages>
      <Page id="detailPage">
        <customHeader>
          <Bar>
            <contentMiddle>
              <Title id="headerTitle" text="Chat App" />
            </contentMiddle>
            <contentRight>
              <Button  
                icon="sap-icon://decline"
                press=".onCloseDialog"
                tooltip="Close" />
            </contentRight>
          </Bar>
        </customHeader>
        <content>
          <ScrollContainer
            width="100%"
            height="90%"
            id="chatScrollContainer"
            horizontal="false"
            vertical="true">
           <List
  id="chatList"
  items="{chat>/messages}"
  showSeparators="None"
  width="100%">
  <CustomListItem>
    <VBox width="100%">
      <HBox justifyContent="{= ${chat>sender} === 'me' ? 'End' : 'Start'}" width="100%">
        <VBox
          class="chatBubble"
          alignItems="{= ${chat>sender} === 'me' ? 'End' : 'Start'}"
          width="auto"
         >
          <Text text="{chat>text}" />
          <Text text="{chat>time}" class="sapUiTinyMarginTop sapUiSmallText" />
        </VBox>
      </HBox>
    </VBox>
  </CustomListItem>
</List>

          </ScrollContainer>
      
         <HBox alignItems="Center" justifyContent="Start" >
        <u:FileUploader id="Mail_id_FileUploader1" fileType="pdf,jpg,jpeg,png,doc,docx,xls,xlsx,ppt,pptx,txt,ppt" name="myFileUpload" multiple="true" uploadUrl="upload/" tooltip="{i18n>toolTipMsgSM}" change="" buttonOnly="true" buttonText=" " icon="sap-icon://attachment"  />
    
          <Input
            id="messageInput1"
            placeholder="Enter your message and Press ↵ to submit."
            submit="sendMessage"
            enabled="{= !!${chat>/current_room}}"
            width="800px"
            class="Groupclass" />
           </HBox>

          <!-- <HBox /> -->
        </content>
      </Page>
    </detailPages>

  </SplitApp>
  </Dialog>
</core:FragmentDefinition>
